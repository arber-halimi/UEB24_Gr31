<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Museum Ticket Purchase</title>
    <link rel="stylesheet" href="./assets/style/ticket.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script
      src="https://kit.fontawesome.com/a076d05399.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="./logo.js"></script>

  </head>
  <body>
    <header>
      <div class="para-header">
        <div class="search-bar">
          <div class="search">
            <i class="fa fa-search"></i>
            <p>Search</p>
          </div>
          <div class="languages">
            <select id="cars" name="cars">
              <option value="volvo">English</option>
              <option value="saab">Shqip</option>
            </select>
          </div>
        </div>
        <div class="logo">
          <h1><span>M</span>useum</h1>
        </div>
        <div class="tickets">
          <button>
            <i class="fas fa-ticket-alt"></i
            ><a href="./ticket.html" style="text-decoration: none; color: white"
              >Tickets</a
            >
          </button>
        </div>
      </div>
      <hr />
      <div class="header">
        <ul>
          <li><a href="./index.html">Home</a></li>
          <li><a href="./about.html">About</a></li>
          <li><a href="./catalog.HTML">Catalog</a></li>
          <li>
            <a href="./exhibition-events/exhibitions-events.html"
              >Exhibitions</a
            >
          </li>
        </ul>
      </div>
    </header>

    <main>
      <div class="event-cards-container">
        <div class="event-card" onclick="openModal('Fossil From The Dawn Of Time', 60,'./exhibition-events/exhibitions/exhibition2.html')">
          <img
            src="./exhibition-events/exhibition-images/fossil.jpg"
            alt="Fossil From The Dawn Of Time"
          />
          <h3>Fossil From The Dawn Of Time</h3>
          <p>Click To Buy Tickets!</p>
        </div>
        <div class="event-card" onclick="openModal('Evolution of Expression: Exploring the Key Periods in Art History', 50,'./exhibition-events/exhibitions/exhibition1.html')">
          <img
            src="./exhibition-events/exhibition-images/Piktura.jpg"
            alt="Exploring the Key Periods in Art History"
          />
          <h3>Evolution of Expression</h3>
          <p>Click To Buy Tickets!</p>
        </div>
        <div class="event-card" onclick="openModal('Machines of the Past', 45,'./exhibition-events/exhibitions/exhibition3.html')">
          <img
            src="./exhibition-events/exhibition-images/oldmachine.jpg"
            alt="Science Fair"
          />
          <h3>Machines of the Past:</h3>
          <p>Click To Buy Tickets!</p>
        </div>
      </div>
      <div id="events">
        <div class="event-cards-container">
          <div class="event-card second-row" onclick="openModal('Ancient Artifacts',35,'./exhibition-events/exhibitions/exhibition4.html')">
          <img src="./exhibition-events/exhibition-images/artifacts.jpg" alt="Ancient Artifacts"/>
          <h3>Ancient Artifacts</h3>
          <p>Click To Buy Tickets!</p>
        </div>
        <div class="event-card second-row" onclick="openModal('Timeless Forms',40,'./exhibition-events/exhibitions/exhibition5.html')">
          <img src="./exhibition-events/exhibition-images/sculpture.jpg" alt="Sculpture"/>
          <h3>Timeless Forms</h3>
          <p>Click To Buy Tickets!</p>
        </div>
        </div>
      </div>

      <div class="forms-container">
        <form id="ticketForm">
          <h2>Ticket Purchase</h2>
          <p>This form is for buying everyday museum tickets, it doesnt correspond to the upcoming events!</p>
          <h2></h2>

          <label for="name">Name:</label>
          <input
            type="text"
            id="name1"
            name="name"
            required
            placeholder="Enter your name"
          />

          <label for="surname">Surname:</label>
          <input
            type="text"
            id="surname1"
            name="surname"
            required
            placeholder="Enter your surname"
          />

          <label for="phone">Phone:</label>
          <input
            type="tel"
            id="phone1"
            name="phone"
            required
            placeholder="Enter your phone number"
            pattern="[0-9]{10}"
            inputmode="numeric"
          />

          <label for="email">Email:</label>
          <input
            type="email"
            id="email1"
            name="email"
            required
            placeholder="Enter your email"
          />

          <label for="ticket-date">Date of Ticket:</label>
          <input type="date" id="ticket-date" name="ticket-date" required />

          <div class="price" id="ticket-price">Ticket Price: $0</div>

          <fieldset>
            <legend>Payment Method:</legend>
            <div class="payment-option">
              <input
                type="radio"
                id="card"
                name="payment-method"
                value="Card"
                required
              />
              <label for="card">Card</label>
            </div>

            <div class="payment-option">
              <input
                type="radio"
                id="cash"
                name="payment-method"
                value="Cash"
              />
              <label for="cash">Cash on Take</label>
            </div>
            <div class="payment-option">
              <input
                type="radio"
                id="paypal"
                name="payment-method"
                value="PayPal"
              />
              <label for="paypal">PayPal</label>
            </div>
          </fieldset>

          <div class="payment-details" id="card-details" style="display: none">
            <label for="card-number">Card Number:</label>
            <input
              type="text"
              id="card-number"
              name="card-number"
              placeholder="Enter card number"
            />

            <label for="expiry-date">Expiry Date:</label>
            <input type="month" id="expiry-date" name="expiry-date" />

            <label for="cvv">CVV:</label>
            <input
              type="password"
              id="cvv"
              name="cvv"
              placeholder="Enter CVV"
            />
          </div>

          <div class="payment-details" id="paypal-details">
            <label for="paypal-email">PayPal Email:</label>
            <input
              type="email"
              id="paypal-email"
              name="paypal-email"
              placeholder="Enter PayPal email"
            />
          </div>

          <div class="payment-details" id="cash-details" style="display: none">
            <p>
              No additional information is required for Cash on Take. Payment
              will be made at the museum.
            </p>
          </div>

          <div class="button-group">
            <input type="submit" value="Buy Ticket" />
            <input type="reset" value="Reset" />
          </div>
        </form>

        <section id="giveaway">
          <h2>Win Free Tickets!</h2>
          <p>
            Enter our monthly giveaway for a chance to win free tickets to the
            museum! Simply fill in your details below:
          </p>
          <form id="giveaway-form" action="#">
            <label for="giveaway-name">Name:</label>
            <input
              type="text"
              id="giveaway-name"
              name="giveaway-name"
              required
              placeholder="Enter your name"
            />

            <label for="giveaway-email">Email:</label>
            <input
              type="email"
              id="giveaway-email"
              name="giveaway-email"
              required
              placeholder="Enter your email"
            />

            <button type="submit">Enter Giveaway</button>
          </form>
        </section>
      </div>

      <div id="ticketModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeModal()">&times;</span>
          <form id="ticketForm">
            <h2 id="eventTitle">Ticket Purchase</h2>
            <p id="eventPrice">Price: $0</p>

            <!-- Adult/Children Selection -->
            <fieldset>
              <legend>Ticket Type:</legend>
              <div class="payment-option">
                <input
                  type="radio"
                  id="adult"
                  name="ticket-type"
                  value="Adult"
                  checked
                />
                <label for="adult">Adult</label>
              </div>

              <div class="payment-option">
                <input
                  type="radio"
                  id="children"
                  name="ticket-type"
                  value="Children"
                />
                <label for="children">Children</label>
              </div>
            </fieldset>

            <!-- Form Fields -->
            <label for="name">Name:</label>
            <input
              type="text"
              id="name"
              name="name"
              required
              placeholder="Enter your name"
            />

            <label for="surname">Surname:</label>
            <input
              type="text"
              id="surname"
              name="surname"
              required
              placeholder="Enter your surname"
            />

            <label for="phone">Phone:</label>
            <input
              type="tel"
              id="phone"
              name="phone"
              required
              placeholder="Enter your phone number"
              pattern="[0-9]{10}"
              inputmode="numeric"
            />

            <label for="email">Email:</label>
            <input
              type="email"
              id="email"
              name="email"
              required
              placeholder="Enter your email"
            />

            <div class="button-group">
              <input type="submit" value="Buy Ticket" />
              <input type="reset" value="Reset" />
            </div>
          </form>
          <button id="more-info-btn">More Info</button>

        </div>
      </div>
    </main>

    <footer>
      <div class="pre-footer">
        <div class="give-your-info">
          <div class="sing-up">
            <h4>Sign up to our mailing list</h4>
            <div class="sign-up-form">
              <form action="#">
                <input type="text" placeholder="Enter your email" />
                <button>Submit</button>
              </form>
            </div>
          </div>
          <div class="buttons">
            <h5>Join the Museum community</h5>
            <button>become a member</button>
            <button>voulenteer</button>
            <button>donate</button>
          </div>
        </div>

        <div class="about">
          <span>about</span>
          <a href="#">about</a>
          <a href="#">Staff and board</a>
          <a href="#">Join the team</a>
          <a href="#">voulenteer uppertunies</a>
          <a href="#">Contact us</a>
        </div>
        <div class="contact">
          <span id="contact">Contact</span>
          <address>
            <span>Rruga Deshmore e Kombit, Prishtine</span>
            <a href="mailto:jim@example.com">jim@example.com</a><br />
            <a href="tel:+14155550132">+1 (415) 555‑0132</a>
          </address>
        </div>
        <div class="opening-hours">
          <span id="time">opening hours</span>
          <table>
            <tr>
              <th></th>
              <th></th>
            </tr>
            <tr>
              <td>Monday</td>
              <td>Closed*</td>
            </tr>
            <tr>
              <td>Tuesday</td>
              <td>10am – 4pm</td>
            </tr>
            <tr>
              <td>Wednesday</td>
              <td>10am – 4pm</td>
            </tr>
            <tr>
              <td>Thursday</td>
              <td>10am – 4pm</td>
            </tr>
            <tr>
              <td>Friday</td>
              <td>10am – 4pm</td>
            </tr>
            <tr>
              <td>Saturday</td>
              <td>10am – 4pm</td>
            </tr>
            <tr>
              <td>Sunday</td>
              <td>10am – 5pm</td>
            </tr>
          </table>
        </div>
      </div>
      <hr />
      <div class="social-media">
        <div class="social">
          <a href="#"
            ><i class="fa fa-instagram" style="font-size: 30px"></i
          ></a>
          <a href="#"><i class="fa fa-facebook" style="font-size: 30px"></i></a>
          <a href="#"><i class="fa fa-github" style="font-size: 30px"></i></a>
        </div>
        <div class="copyright">
          <span>&copy; copyright 2025 museum of arts</span>
        </div>
      </div>
    </footer>

<script>
    document.getElementById('more-info-btn').addEventListener('click', () => {
      try {const modal = document.getElementById('ticketModal');
  const redirectUrl = modal.getAttribute('data-redirect-url');
  
  if (redirectUrl) {
    window.location.href = redirectUrl; // Redirect to the exhibition page
  }
} catch (error) {
  console.error('Error handling more-info button click:',error);
}
});
  

  let originalPrice = 0; 
  function openModal(eventName, price, redirectUrl) {
    try {
    const modal = document.getElementById('ticketModal');
    document.getElementById('eventTitle').textContent = eventName;
    originalPrice = price; 
    document.getElementById('eventPrice').textContent = `Price: $${originalPrice}`;
    document.getElementById('adult').checked = true;
    updatePriceBasedOnType(); 
    modal.style.display = 'block';
    modal.setAttribute('data-redirect-url', redirectUrl);
    } catch (error) {
      console.error('Error opening modal:', error);
    }
  
  
  const modal = document.getElementById('ticketModal');
  document.getElementById('eventTitle').textContent = eventName;

  
  originalPrice = price; 
  document.getElementById('eventPrice').textContent = `Price: $${originalPrice}`;

  
  document.getElementById('adult').checked = true;
  updatePriceBasedOnType(); 

  modal.style.display = 'block';
  
  modal.setAttribute('data-redirect-url', redirectUrl);
}

function closeModal() {
  const modal = document.getElementById('ticketModal');
  modal.style.display = 'none';
}

// Event listener to update price based on the selected ticket type (Adult or Children)
document.querySelectorAll('input[name="ticket-type"]').forEach(input => {
  input.addEventListener('change', function () {
    updatePriceBasedOnType();
  });
});

function updatePriceBasedOnType() {
  const ticketType = document.querySelector('input[name="ticket-type"]:checked').value;
  let finalPrice = originalPrice; // Start with the original price

  if (ticketType === 'Children') {
    finalPrice = originalPrice - 5; // $5 discount for children
  }

  document.getElementById('eventPrice').textContent = `Price: $${finalPrice}`;
}


// Close modal when clicking outside content
window.onclick = function(event) {
  const modal = document.getElementById('ticketModal');
  if (event.target === modal) {
    modal.style.display = 'none';
  }
}

    function navigateToForm(eventName, price){
      document.getElementById('event').value = eventName;
      document.getElementById('ticket-price').textContent = `Ticket Price: $${price}`;
      document.getElementById('ticketForm').scrollIntoView({ behavior: 'smooth' });
    }
    function togglePaymentDetails() {
      const selectedMethod = document.querySelector('[name="payment-method"]:checked').value;
      document.getElementById('card-details').style.display = selectedMethod === 'Card' ? 'block' : 'none';
      document.getElementById('paypal-details').style.display = selectedMethod === 'PayPal' ? 'block' : 'none';
      document.getElementById('cash-details').style.display = selectedMethod === 'Cash' ? 'block' : 'none';
    }

    const paymentMethods = document.querySelectorAll('[name="payment-method"]');
    paymentMethods.forEach(method => method.addEventListener('change', togglePaymentDetails));

    const ticketDateInput = document.getElementById('ticket-date');
    const ticketPriceDisplay = document.getElementById('ticket-price');
    const cardDetails = document.getElementById('card-details');
    const paypalDetails = document.getElementById('paypal-details');
    const cashDetails = document.getElementById('cash-details');
    const ticketForm = document.getElementById('ticketForm');

    ticketDateInput.addEventListener('change', () => {
      const selectedDate = new Date(ticketDateInput.value);
      const today = new Date();
      const oneMonthLater = new Date();
      oneMonthLater.setMonth(today.getMonth() + 1);
      if (selectedDate < today || selectedDate > oneMonthLater) {
        alert('Please select a date within the next month and not in the past.');
        ticketDateInput.value = '';
      } else {
        const day = selectedDate.getDay();
        const price = (day === 0 || day === 6) ? 20 : 15;
        ticketPriceDisplay.textContent = `Ticket Price: $${price}`;
      }
    });

    // Show/hide payment details based on the selected payment method
    paymentMethods.forEach(method => {
      method.addEventListener('change', () => {
        cardDetails.style.display = method.value === 'Card' ? 'block' : 'none';
        paypalDetails.style.display = method.value === 'PayPal' ? 'block' : 'none';
        cashDetails.style.display = method.value === 'Cash' ? 'block' : 'none';
      });
    });

    ticketForm.addEventListener('submit', (event) => {
      const selectedMethod = [...paymentMethods].find(method => method.checked);
      if (!selectedMethod) {
        alert('Please select a payment method.');
        event.preventDefault();
        return;
      }

      if (selectedMethod.value === 'Card') {
        const cardNumber = document.getElementById('card-number').value.trim();
        const expiryDate = document.getElementById('expiry-date').value.trim();
        const cvv = document.getElementById('cvv').value.trim();

        if (!cardNumber || !expiryDate || !cvv) {
          alert('Please fill in all card details.');
          event.preventDefault();
          return;
        }
      }

      if (selectedMethod.value === 'PayPal') {
        const paypalEmail = document.getElementById('paypal-email').value.trim();
        if (!paypalEmail) {
          alert('Please fill in your PayPal email.');
          event.preventDefault();
          return;
        }
      }
    });
    const ticketsArray = [];
    class Ticket {
      constructor(name, surname, phone, email, ticketDate, paymentMethod) {
        this.name=name;
        this.surname=surname;
        this.phone=phone;
        this.email=email;
        this.ticketDate=ticketDate;
        this.paymentMethod=paymentMethod;
      }
      displayTicket() {
        console.log(`Ticket for ${this.name} ${this.surname}`);
      }
    }
    function saveTicket(){
      const name = document.getElementById('name1').value;
      const surname = document.getElementById('surname1').value;
      const phone = document.getElementById('phone1').value;
      const email = document.getElementById('email1').value;
      const ticketDate = document.getElementById('ticket-date').value;
      const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
      const newTicket = new Ticket(name,surname,phone, email,ticketDate,paymentMethod);
      ticketsArray.push(newTicket);
      newTicket.displayTicket();
      alert('Ticket saved successfully!');
    }
    document.getElementById('ticketForm').addEventListener('submit',function (event){
      event.preventDefault();
      saveTicket();
      this.reset();
    });
  </script>
  </body>
</html>
